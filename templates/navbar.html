<header class="sticky top-0 z-50 border-b border-slate-200 bg-white/80 backdrop-blur-md dark:border-slate-800 dark:bg-slate-900/80">
    <div class="mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-3 lg:px-8">
        <a href="{{ url_for('index') }}" class="group inline-flex items-center gap-2.5 rounded-md" aria-label="Baroo home" title="Baroo">
            <img src="{{ url_for('static', filename='icons/acorn-svgrepo-com.svg') }}" alt="" class="h-8 w-8 shrink-0" aria-hidden="true">
            <span class="font-sans text-lg font-semibold tracking-tight text-slate-800 transition-colors group-hover:text-slate-900 dark:text-slate-100 dark:group-hover:text-white">Baroo</span>
            <span class="sr-only">Baroo</span>
        </a>

        <nav class="hidden items-center gap-6 md:flex" aria-label="Primary navigation">
            <a
                href="{{ url_for('index') }}"
                class="text-sm font-medium transition-colors {% if request.endpoint == 'index' %}text-rose-600 dark:text-rose-400{% else %}text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100{% endif %}"
            >
                Single Video
            </a>
            <a
                href="{{ url_for('channel_scraper') }}"
                class="text-sm font-medium transition-colors {% if request.endpoint == 'channel_scraper' %}text-rose-600 dark:text-rose-400{% else %}text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100{% endif %}"
            >
                Channel Scraper
            </a>
            <a
                href="{{ url_for('data_viewer') }}"
                class="text-sm font-medium transition-colors {% if request.endpoint == 'data_viewer' %}text-rose-600 dark:text-rose-400{% else %}text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100{% endif %}"
            >
                Data Viewer
            </a>
        </nav>

        <div class="flex items-center gap-2 sm:gap-3">
            <div class="relative">
                <button
                    id="export-dropdown-button"
                    type="button"
                    class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"
                    aria-haspopup="menu"
                    aria-expanded="false"
                >
                    Export Data
                    <svg class="h-4 w-4 text-slate-500 dark:text-slate-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.12l3.71-3.9a.75.75 0 111.08 1.04l-4.25 4.47a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path>
                    </svg>
                </button>
                <div
                    id="export-dropdown-menu"
                    class="absolute right-0 z-50 mt-2 hidden w-44 rounded-xl border border-slate-200 bg-white p-1.5 shadow-lg shadow-slate-900/10 dark:border-slate-700 dark:bg-slate-900 dark:shadow-black/30"
                    role="menu"
                    aria-labelledby="export-dropdown-button"
                >
                    <a class="block rounded-lg px-3 py-2 text-sm text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100" href="{{ url_for('export_data_route', format='csv') }}" role="menuitem">Export as CSV</a>
                    <a class="mt-1 block rounded-lg px-3 py-2 text-sm text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100" href="{{ url_for('export_data_route', format='xlsx') }}" role="menuitem">Export as Excel</a>
                </div>
            </div>

            <div class="relative">
                <button
                    id="theme-toggle"
                    type="button"
                    class="inline-flex items-center justify-center rounded-full p-2 text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100"
                    aria-haspopup="menu"
                    aria-expanded="false"
                    aria-label="Theme options"
                    title="Theme options"
                >
                    <span class="sr-only">Theme options</span>
                </button>
                <div
                    id="theme-menu"
                    class="absolute right-0 z-50 mt-2 hidden w-44 rounded-xl border border-slate-200 bg-white p-1.5 shadow-lg shadow-slate-900/10 dark:border-slate-700 dark:bg-slate-900 dark:shadow-black/30"
                    role="menu"
                    aria-labelledby="theme-toggle"
                >
                    <button type="button" class="theme-option block w-full rounded-lg px-3 py-2 text-left text-sm text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100" data-theme-value="auto" role="menuitem">Automatic</button>
                    <button type="button" class="theme-option mt-1 block w-full rounded-lg px-3 py-2 text-left text-sm text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100" data-theme-value="light" role="menuitem">Light mode</button>
                    <button type="button" class="theme-option mt-1 block w-full rounded-lg px-3 py-2 text-left text-sm text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100" data-theme-value="dark" role="menuitem">Dark mode</button>
                </div>
            </div>
        </div>
    </div>

    <nav class="mx-auto flex w-full max-w-7xl items-center gap-5 overflow-x-auto px-4 pb-3 md:hidden lg:px-8" aria-label="Mobile navigation">
        <a
            href="{{ url_for('index') }}"
            class="whitespace-nowrap text-sm font-medium transition-colors {% if request.endpoint == 'index' %}text-rose-600 dark:text-rose-400{% else %}text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100{% endif %}"
        >
            Single Video
        </a>
        <a
            href="{{ url_for('channel_scraper') }}"
            class="whitespace-nowrap text-sm font-medium transition-colors {% if request.endpoint == 'channel_scraper' %}text-rose-600 dark:text-rose-400{% else %}text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100{% endif %}"
        >
            Channel Scraper
        </a>
        <a
            href="{{ url_for('data_viewer') }}"
            class="whitespace-nowrap text-sm font-medium transition-colors {% if request.endpoint == 'data_viewer' %}text-rose-600 dark:text-rose-400{% else %}text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100{% endif %}"
        >
            Data Viewer
        </a>
    </nav>
</header>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const button = document.getElementById("export-dropdown-button");
        const menu = document.getElementById("export-dropdown-menu");

        if (!button || !menu) return;

        button.addEventListener("click", function () {
            const isOpen = !menu.classList.contains("hidden");
            menu.classList.toggle("hidden");
            button.setAttribute("aria-expanded", String(!isOpen));
        });

        document.addEventListener("click", function (event) {
            if (!menu.contains(event.target) && !button.contains(event.target)) {
                menu.classList.add("hidden");
                button.setAttribute("aria-expanded", "false");
            }
        });

        document.addEventListener("keydown", function (event) {
            if (event.key === "Escape") {
                menu.classList.add("hidden");
                button.setAttribute("aria-expanded", "false");
            }
        });
    });
</script>
