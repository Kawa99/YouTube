<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}YouTube Tracker{% endblock %}</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='icons/acorn-svgrepo-com.svg') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    fontFamily: {
                        sans: ["Inter", "ui-sans-serif", "system-ui", "sans-serif"],
                        mono: ["JetBrains Mono", "ui-monospace", "SFMono-Regular", "monospace"],
                    },
                    colors: {
                        rose: tailwind.colors.rose,
                    },
                },
            },
        };
    </script>
    <script>
        (function () {
            let preference = "auto";
            try {
                const storedTheme = localStorage.getItem("theme");
                if (storedTheme === "light" || storedTheme === "dark" || storedTheme === "auto") {
                    preference = storedTheme;
                }
            } catch (_) {
                // Ignore storage failures and fall back to automatic mode.
            }

            const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
            const effectiveTheme = preference === "auto" ? (prefersDark ? "dark" : "light") : preference;
            document.documentElement.classList.toggle("dark", effectiveTheme === "dark");
        })();
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body class="font-sans antialiased min-h-screen flex flex-col bg-slate-50 text-slate-900 transition-colors duration-200 dark:bg-slate-900 dark:text-slate-100">
    <div class="relative isolate flex min-h-screen flex-col overflow-x-clip">
        <div aria-hidden="true" class="pointer-events-none absolute inset-x-0 -top-36 -z-10 flex justify-center">
            <div class="h-80 w-[46rem] rounded-full bg-gradient-to-r from-rose-200/70 via-white to-sky-200/70 blur-3xl dark:from-rose-900/35 dark:via-slate-900 dark:to-sky-900/30"></div>
        </div>
        <div aria-hidden="true" class="pointer-events-none absolute inset-x-0 bottom-0 -z-10 flex justify-center">
            <div class="h-80 w-[52rem] rounded-full bg-gradient-to-r from-rose-100/55 via-slate-100/60 to-cyan-100/55 blur-3xl dark:from-rose-900/20 dark:via-slate-900 dark:to-cyan-900/20"></div>
        </div>

        {% include 'navbar.html' %}

        <main class="relative z-10 flex-1">
            <section class="mx-auto w-full max-w-7xl px-4 py-8 sm:px-6 lg:px-8 lg:py-12">
                <div class="rounded-3xl border border-white/70 bg-white/70 p-5 shadow-[0_24px_60px_-36px_rgba(15,23,42,0.35)] backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/40 sm:p-8">
                    {% block content %}{% endblock %}
                </div>
            </section>
        </main>

        <footer class="relative z-10 border-t border-slate-200/80 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-950/55">
            <div class="mx-auto w-full max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
                <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
                    <div>
                        <p class="text-sm font-semibold tracking-tight text-slate-700 dark:text-slate-200">Baroo YouTube Tracker</p>
                        <p class="mt-1 text-xs text-slate-500 dark:text-slate-400">Simple analytics for videos, channels, and history snapshots.</p>
                    </div>
                    <nav class="flex flex-wrap items-center gap-x-5 gap-y-2 text-sm" aria-label="Footer navigation">
                        <a href="{{ url_for('index') }}" class="text-slate-600 transition-colors hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100">Single Video</a>
                        <a href="{{ url_for('channel_scraper') }}" class="text-slate-600 transition-colors hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100">Channel Scraper</a>
                        <a href="{{ url_for('data_viewer') }}" class="text-slate-600 transition-colors hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100">Data Viewer</a>
                    </nav>
                </div>
                <div class="mt-4 flex items-center justify-between border-t border-slate-200/80 pt-4 text-xs text-slate-500 dark:border-slate-800 dark:text-slate-400">
                    <p>Export-ready CSV and Excel downloads</p>
                    <p class="font-mono">Modern SaaS Minimalism</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="{{ url_for('static', filename='js/copyButton.js') }}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const flashMessages = {{ get_flashed_messages(with_categories=true) | tojson }};
            if (!flashMessages || !flashMessages.length || !window.Toastify) {
                return;
            }

            const stylesByCategory = {
                success: "linear-gradient(135deg, #059669, #10b981)",
                warning: "linear-gradient(135deg, #d97706, #f59e0b)",
                error: "linear-gradient(135deg, #dc2626, #ef4444)",
                danger: "linear-gradient(135deg, #dc2626, #ef4444)",
                info: "linear-gradient(135deg, #2563eb, #3b82f6)",
            };

            flashMessages.forEach(function ([category, message]) {
                Toastify({
                    text: message,
                    duration: 4200,
                    gravity: "bottom",
                    position: "right",
                    close: true,
                    stopOnFocus: true,
                    offset: { x: 16, y: 16 },
                    style: {
                        background: stylesByCategory[category] || "linear-gradient(135deg, #334155, #475569)",
                        color: "#f8fafc",
                        borderRadius: "0.9rem",
                        boxShadow: "0 18px 45px rgba(2, 6, 23, 0.38)",
                    },
                }).showToast();
            });
        });
    </script>
</body>
</html>
