{% extends 'base.html' %}

{% block title %}Channel Scraper - YouTube Tracker{% endblock %}

{% block content %}
    <div class="container mt-5">
        <h2 class="mb-4">YouTube Channel Scraper</h2>
        <p class="text-muted">Extract data from all videos in a YouTube channel</p>
        
        <form method="post" class="mb-4">
            <div class="mb-3">
                <label for="channel_url" class="form-label">Channel URL</label>
                <input type="url" name="channel_url" id="channel_url" class="form-control" 
                       placeholder="https://www.youtube.com/@channelname or https://www.youtube.com/channel/UC..." required>
                <div class="form-text">
                    Supported formats:
                    <ul class="mt-2">
                        <li>https://www.youtube.com/@channelname</li>
                        <li>https://www.youtube.com/channel/UC...</li>
                        <li>https://www.youtube.com/c/channelname</li>
                        <li>https://www.youtube.com/user/username</li>
                    </ul>
                </div>
            </div>
            
            <div class="mb-3">
                <label for="max_videos" class="form-label">Maximum Videos to Process</label>
                <input type="number" name="max_videos" id="max_videos" class="form-control" 
                       value="50" min="1" max="1000" required>
                <div class="form-text">
                    Note: Processing large numbers of videos may take a significant amount of time due to API rate limits.
                    Each video requires multiple API calls and transcript fetching.
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-play-circle"></i> Start Channel Scraping
            </button>
        </form>

        <div class="alert alert-info">
            <h5 class="alert-heading">How it works:</h5>
            <ul class="mb-0">
                <li>Enter any YouTube channel URL in the supported formats</li>
                <li>Choose how many videos to process (starting from most recent)</li>
                <li>The system will automatically extract all video data including titles, views, likes, comments, transcripts, and more</li>
                <li>All data is saved to your database for export later</li>
                <li>Processing time depends on the number of videos and API rate limits</li>
            </ul>
        </div>

        <div class="alert alert-warning">
            <h5 class="alert-heading">Important Notes:</h5>
            <ul class="mb-0">
                <li>This process can take a long time for channels with many videos</li>
                <li>Some videos may fail to process due to privacy settings or unavailable transcripts</li>
                <li>The process respects YouTube's API rate limits</li>
                <li>You can export all collected data using the Export feature in the navbar</li>
            </ul>
        </div>
    </div>

    <!-- Display flashed messages -->
    {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }} mt-3">{{ message }}</div>
        {% endfor %}
    {% endif %}
    {% endwith %}

{% endblock %}